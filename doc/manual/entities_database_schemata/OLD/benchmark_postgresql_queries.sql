SELECT "media_resources".* FROM "media_resources" WHERE "media_resources"."id" = 5221 AND ( media_resources.user_id = 10262
    OR
    media_resources.view = true
    OR
    EXISTS ( SELECT 'true' FROM "userpermissions" WHERE "userpermissions"."view" = 't' AND "userpermissions"."user_id" = 10262 AND (userpermissions.media_resource_id = media_resources.id) )
    OR
    EXISTS ( SELECT 'true' FROM "grouppermissions" INNER JOIN "groups" ON "groups"."id" = "grouppermissions"."group_id" INNER JOIN "groups_users" ON "groups_users"."group_id" = "groups"."id" INNER JOIN "users" ON "users"."id" = "groups_users"."user_id" WHERE "grouppermissions"."view" = 't' AND (grouppermissions.media_resource_id = media_resources.id) AND (users.id = 10262) )
     ) LIMIT 1;
SELECT COUNT(*) FROM "media_resources" WHERE "media_resources"."id" = 61297 AND ( media_resources.user_id = 10262
   OR
    media_resources.edit = true
     OR
      EXISTS ( SELECT 'true' FROM "userpermissions" WHERE "userpermissions"."edit" = 't' AND "userpermissions"."user_id" = 10262 AND (userpermissions.media_resource_id = media_resources.id) )
       OR
        EXISTS ( SELECT 'true' FROM "grouppermissions" INNER JOIN "groups" ON "groups"."id" = "grouppermissions"."group_id" INNER JOIN "groups_users" ON "groups_users"."group_id" = "groups"."id" INNER JOIN "users" ON "users"."id" = "groups_users"."user_id" WHERE "grouppermissions"."edit" = 't' AND (grouppermissions.media_resource_id = media_resources.id) AND (users.id = 10262) )
        ); SELECT COUNT(count_column) FROM (SELECT 1 AS count_column FROM "media_resources" WHERE "media_resources"."type" IN ('MediaEntry', 'MediaSet', 'FilterSet') AND ( media_resources.user_id = 10262
   OR
    media_resources.view = true
     OR
      EXISTS ( SELECT 'true' FROM "userpermissions" WHERE "userpermissions"."view" = 't' AND "userpermissions"."user_id" = 10262 AND (userpermissions.media_resource_id = media_resources.id) )
       OR
        EXISTS ( SELECT 'true' FROM "grouppermissions" INNER JOIN "groups" ON "groups"."id" = "grouppermissions"."group_id" INNER JOIN "groups_users" ON "groups_users"."group_id" = "groups"."id" INNER JOIN "users" ON "users"."id" = "groups_users"."user_id" WHERE "grouppermissions"."view" = 't' AND (grouppermissions.media_resource_id = media_resources.id) AND (users.id = 10262) )
        ) AND (media_resources.user_id <> 10262) AND ( EXISTS ( SELECT 'true' FROM "userpermissions" WHERE "userpermissions"."view" = 't' AND "userpermissions"."user_id" = 10262 AND (userpermissions.media_resource_id = media_resources.id) )
         OR
          EXISTS ( SELECT 'true' FROM "grouppermissions" INNER JOIN "groups" ON "groups"."id" = "grouppermissions"."group_id" INNER JOIN "groups_users" ON "groups_users"."group_id" = "groups"."id" INNER JOIN "users" ON "users"."id" = "groups_users"."user_id" WHERE "grouppermissions"."view" = 't' AND (grouppermissions.media_resource_id = media_resources.id) AND (users.id = 10262) )
          ) LIMIT 11) subquery_for_count;
SELECT "media_resources".* FROM "media_resources" INNER JOIN "media_resource_arcs" ON "media_resource_arcs"."child_id" = "media_resources"."id" WHERE "media_resources"."type" IN ('MediaEntry') AND "media_resource_arcs"."cover" = 't' AND (media_resources.id IN ( 31461,31467,31471,31473,31475,31477,31479,31481,31487,31493,31501,31503,31511,31515,31517,31519,31521,31523,31525,31529,31531,31539,31545,31547,31549,31551,31553,31555,31557,31559,31565,31571,31573,31577,31583,31585,31587,31593,31599,31603,31621,31623,31625,31629,31631,31637,31639,31643,31645,31651,31657,31659,31663,31669,31677,31683,31689,31691,31693,31695,31699,31705,31707,31717,31719,31729,31741,31743,31749,31753,31755,31757,31759,31761,31769,31777,31779,31781,31783,31787,31789,31801,31807,31809,31811,31813,31815,31819,31821,31823,31825,31827,31831,31833,31841,31845,31849,31851,31855,31857,31859,31863,31871,31873,31877,31879,31881,31883,31885,31887,31891,31899,31901,31903,31907,31909,31925,31933,31935,31937,31943,31949,31955,31957,31961,31965,31967,31971,31975,31981,31985,31987,31993,31997,32003,32005,32011,32015,32017,32019,32023,32029,32031,32033,32035,32037,32041,32043,32049,32053,32059,32061,32063,32065,32067,32069,32071,32075,32083,32087,32089,32091,32093,32095,32101,32103,32107,32111,32113,32115,32121,32125,32131,32133,32139,32143,32145,32147,32153,32161,32167,32179,32181,32185,32191,32195,32197,32199,32201,32203,32205,32209,32215,32219,32223,32227,32233,32235,32241,32243,32253,32257,32261,32263,32267,32281,32283,32285,32287,32289,32291,32295,32299,32301,32305,32309,32311,32323,32325,32327,32331,32335,32343,32345,32349,32353,32355,32363,32365,32375,32377,32379,32385,32389,32391,32399,32401,32405,32407,32413,32419,32425,32431,32433,32435,32437,32441,32445,32447,32451,32453,32455,32457,32463,32465,32467,32471,32473,32479,32481,32483,32489,32493,32497,32499,32503,32505,32517,32521,32525,32529,32531,32537,32539,32545,32547,32553,32555,32557,32559,32561,32563,32565,32567,32569,32573,32577,32579,32593,32595,32603,32609,32611,32613,32617,32619,32625,32627,32631,32637,32639,32641,32643,32649,32651,32653,32663,32665,32667,32671,32675,32677,32679,32681,32689,32691,32693,32695,32697,32699,32701,32703,32705,32715,32717,32721,32725,32729,32731,32733,32739,32745,32749,32755,32757,32759,32761,32763,32765,32767,32769,32773,32781,32783,32785,32787,32791,32793,32795,32797,32799,32801,32803,32805,32807,32809,32811,32813,32815,32819,32825,32829,32831,32837,32839,32841,32847,32849,32855,32861,32871,32875,32877,32881,32889,32891,32897,32909,32911,32917,32925,32929,32933,32935,32937,32939,32941,32943,32945,32947,32953,32959,32965,32967,32971,32975,32981,32989,32991,32997,33001,33007,33013,33015,33017,33021,33023,33029,33033,33037,33045,33047,33051,33053,33059,33061,33067,33085,33091,33093,33097,33105,33109,33113,33117,33125,33127,33129,33135,33137,33143,33145,33155,33161,33169,33171,33173,33175,33177,33185,33195,33197,33199,33209,33215,33217,33219,33221,33227,33229,33231,33235,33239,33251,33255,33263,33265,33267,33269,33271,33275,33279,33283,33285,33291,33297,33305,33311,33313,33315,33319,33323,33333,33339,33343,33345,33347,33351,33355,33357,33367,33369,33373,33375,33377,33385,33391,33397,33409,33411,33415,33417,33419,33421,33425,33427,33431,33433,33441,33443,33447,33459,33461,33463,33465,33467,33473,33475,33477,33479,33481,33483,33495,33501,33505,33507,33521,33523,33525,33527,33531,33537,33539,33543,33549,33551,33567,33571,33577,33579,33583,33585,33587,33589,33591,33603,33607,33609,33611,33615,33617,33619,33621,33623,33625,33627,33635,33637,33645,33647,33651,33653,33659,33661,33669,33671,33675,33677,33679,33707,33713,33721,33723,33727,33729,33743,33759,33763,33767,33771,33773,33775,33777,33785,33787,33789,33793,33797,33799,33805,33807,33809,33811,33813,33815,33817,33819,33821,33823,33831,33833,33835,33837,33841,33845,33847,33851,33853,33857,33859,33861,33863,33871,33873,33875,33881,33883,33887,33889,33895,33897,33899,33903,33905,33907,33909,33913,33915,33925,33927,33929,33931,33933,33935,33939,33943,33947,33951,33953,33959,33961,33965,33967,33969,33971,33973,33975,33995,33997,33999,34003,34011,34013,34015,34021,34025,34033,34035,34037,34041,34047,34051,34053,34057,34065,34067,34071,34075,34081,34083,34085,34089,34091,34093,34105,34109,34111,34113,34115,34117,34119,34121,34127,34131,34141,34143,34147,34149,34151,34159,34161,34169,34171,34173,34175,34181,34183,34185,34191,34193,34201,34205,34207,34209,34213,34221,34223,34225,34237,34243,34245,34251,34259,34263,34267,34269,34271,34273,34281,34283,34285,34287,34291,34293,34295,34299,34309,34313,34315,34329,34331,34335,34339,34341,34347,34349,34355,34357,34363,34365,34367,34373,34381,34383,34385,34393,34395,34399,34403,34407,34413,34417,34421,34423,34425,34427,34429,34431,34433,34437,34441,34447,34449,34453,34455,34459,34461,34463,34465,34467,34469,34471,34473,34485,34487,34491,34493,34495,34497,34499,34501,34503,34515,34523,34527,34533,34541,34543,34545,34547,34551,34561,34565,34567,34571,34577,34581,34593,34599,34603,34609,34613,34615,34619,34629,34643,34645,34647,34653,34655,34657,34659,34661,34667,34669,34671,34673,34675,34685,34689,34697,34701,34705,34717,34723,34725,34729,34731,34743,34745,34749,34751,34753,34759,34761,34763,34769,34771,34773,34775,34777,34783,34797,34801,34803,34807,34809,34813,34815,34817,34821,34823,34825,34829,34831,34835,34847,34851,34855,34859,34863,34867,34869,34871,34875,34877,34883,34885,34889,34893,34895,34899,34905,34907,34909,34911,34913,34919,34925,34931,34933,34937,34945,34947,34949,34953,34959,34965,34967,34973,34979,34981,34983,34985,34987,34991,34993,34995,34997,34999,35003,35005,35007,35009,35021,35025,35029,35035,35039,35043,35045,35047,35053,35055,35057,35059,35061,35063,35067,35071,35073,35075,35079,35083,35085,35097,35103,35105,35107,35111,35117,35121,35123,35125,35133,35135,35147,35155,35157,35159,35165,35171,35175,35181,35183,35185,35187,35191,35193,35197,35199,35203,35207,35209,35213,35215,35217,35219,35223,35231,35237,35239,35243,35245,35251,35255,35257,35265,35267,35271,35275,35281,35291,35293,35295,35313,35315,35321,35323,35325,35329,35331,35333,35337,35341,35343,35345,35365,35371,35373,35377,35379,35383,35385,35391,35397,35405,35407,35411,35417,35421,35427,35429,35433,35437,35457,35461,35469,35471,35475,35481,35485,35487,35491,35501,35503,35511,35513,35515,35521,35523,35525,35529,35533,35541,35543,35545,35563,35565,35567,35575,35577,35579,35583,35587,35589,35593,35595,35601,35605,35607,35609,35611,35615,35619,35623,35631,35635,35643,35645,35647,35651,35655,35657,35659,35667,35669,35673,35677,35687,35689,35691,35693,35699,35711,35713,35715,35717,35721,35723,35731,35735,35737,35739,35741,35747,35751,35755,35759,35761,35763,35767,35769,35771,35773,35777,35781,35787,35793,35795,35797,35799,35801,35803,35805,35811,35813,35817,35825,35831,35833,35835,35839,35845,35847,35851,35857,35861,35867,35869,35871,35873,35875,35881,35887,35889,35891,35895,35897,35899,35901,35905,35913,35915,35917,35921,35923,35925,35931,35933,35935,35937,35941,35951,35953,35959,35965,35967,35973,35983,35987,35989,35991,35993,35999,36001,36003,36005,36007,36009,36011,36013,36015,36019,36021,36027,36033,36035,36037,36039,36041,36045,36047,36049,36055,36057,36065,36067,36073,36079,36081,36089,36091,36097,36101,36103,36105,36107,36115,36117,36123,36127,36131,36135,36139,36141,36143,36147,36149,36161,36163,36165,36169,36171,36183,36185,36193,36195,36199,36203,36205,36207,36209,36213,36219,36225,36227,36239,36243,36245,36251,36253,36255,36257,36263,36265,36269,36271,36273,36283,36293,36295,36301,36303,36305,36311,36321,36323,36327,36333,36335,36337,36341,36347,36349,36357,36361,36363,36367,36371,36385,36401,36409,36413,36417,36419,36423,36425,36431,36433,36435,36437,36453,36455,36461,36465,36469,36471,36475,36479,36489,36495,36497,36501,36503,36505,36509,36513,36515,36525,36529,36539,36543,36545,36553,36567,36569,36571,36575,36577,36579,36581,36593,36599,36601,36605,36607,36609,36615,36619,36625,36627,36631,36633,36637,36645,36649,36651,36653,36657,36659,36661,36665,36667,36671,36673,36677,36681,36683,36685,36687,36693,36699,36701,36707,36709,36713,36723,36725,36727,36733,36735,36741,36745,36747,36749,36751,36759,36761,36763,36769,36771,36773,36775,36777,36779,36791,36793,36799,36803,36807,36811,36821,36823,36825,36827,36831,36833,36839,36841,36845,36849,36851,36853,36855,36861,36863,36865,36869,36875,36877,36881,36885,36889,36893,36895,36899,36901,36903,36905,36907,36909,36911,36915,36919,36921,36923,36925,36929,36931,36935,36937,36939,36943,36945,36949,36953,36955,36963,36965,36969,36971,36973,36979,36983,36985,36987,36991,36999,37015,37017,37039,37051,37053,37059,37063,37065,37067,37071,37075,37079,37081,37083,37087,37093,37101,37105,37111,37113,37115,37119,37123,37125,37127,37129,37141,37143,37145,37155,37167,37169,37171,37173,37181,37183,37189,37191,37193,37195,37199,37205,37209,37211,37215,37217,37221,37223,37225,37227,37229,37233,37235,37237,37239,37243,37245,37251,37253,37257,37261,37265,37267,37269,37273,37275,37279,37283,37291,37293,37297,37299,37303,37305,37307,37309,37311,37313,37319,37321,37327,37329,37345,37347,37349,37357,37363,37367,37371,37373,37377,37379,37383,37385,37389,37395,37397,37399,37403,37405,37407,37409,37413,37419,37421,37425,37429,37431,37433,37435,37437,37441,37443,37447,37455,37457,37463,37467,37469,37475,37477,37483,37485,37487,37493,37499,37503,37505,37509,37515,37517,37523,37529,37531,37533,37535,37537,37543,37547,37551,37553,37555,37559,37561,37563,37565,37571,37573,37577,37579,37581,37583,37585,37587,37607,37611,37613,37617,37621,37625,37627,37633,37635,37637,37647,37649,37653,37655,37659,37661,37681,37683,37685,37687,37689,37691,37695,37697,37701,37703,37707,37709,37711,37715,37719,37721,37725,37731,37733,37735,37737,37739,37745,37747,37751,37753,37759,37761,37765,37769,37771,37775,37777,37781,37783,37795,37799,37803,37805,37811,37813,37815,37817,37819,37825,37829,37833,37835,37837,37839,37841,37843,37847,37851,37853,37855,37859,37863,37871,37877,37885,37889,37895,37897,37905,37907,37919,37921,37923,37925,37929,37931,37933,37941,37943,37949,37953,37955,37959,37961,37965,37971,37977,37981,37983,37985,37987,37989,37993,37995,37997,37999,38011,38013,38015,38019,38021,38025,38031,38037,38039,38041,38043,38047,38053,38055,38057,38059,38065,38067,38075,38079,38083,38085,38091,38093,38099,38103,38111,38113,38115,38117,38119,38121,38123,38131,38137,38139,38147,38149,38151,38153,38159,38161,38165,38167,38169,38171,38175,38177,38181,38183,38187,38191,38193,38195,38199,38205,38211,38213,38219,38221,38223,38227,38231,38233,38235,38237,38243,38247,38253,38255,38261,38263,38267,38269,38275,38277,38281,38283,38285,38291,38297,38301,38309,38311,38313,38315,38331,38333,38335,38337,38345,38349,38351,38353,38355,38367,38375,38377,38379,38381,38383,38385,38389,38391,38397,38413,38415,38417,38419,38421,38427,38429,38431,38433,38435,38441,38443,38465,38469,38479,38481,38483,38487,38489,38491,38495,38499,38501,38507,38511,38513,38517,38519,38523,38529,38535,38543,38549,38551,38553,38555,38559,38563,38567,38571,38575,38579,38583,38585,38595,38601,38615,38621,38627,38631,38633,38635,38639,38645,38657,38663,38669,38675,38677,38679,38681,38689,38691,38693,38697,38699,38701,38703,38705,38709,38711,38715,38717,38723,38727,38729,38731,38733,38741,38743,38745,38747,38749,38757,38759,38761,38763,38769,38771,38775,38777,38781,38787,38791,38797,38799,38801,38803,38805,38807,38809,38811,38819,38821,38823,38825,38839,38843,38845,38847,38849,38851,38853,38855,38859,38863,38867,38869,38879,38881,38885,38889,38891,38893,38895,38907,38909,38911,38919,38923,38929,38931,38933,38939,38941,38943,38945,38947,38949,38953,38955,38959,38961,38967,38971,38975,38981,38987,38989,38993,38995,38997,38999,39001,39005,39007,39009,39011,39015,39017,39025,39033,39037,39039,39045,39053,39059,39063,39065,39067,39069,39071,39079,39081,39083,39087,39089,39091,39099,39103,39113,39115,39117,39119,39121,39123,39131,39135,39137,39143,39145,39147,39151,39167,39169,39173,39175,39179,39181,39187,39193,39195,39197,39201,39203,39205,39207,39209,39211,39213,39215,39219,39221,39225,39231,39235,39241,39245,39249,39255,39259,39261,39263,39267,39271,39273,39277,39283,39289,39291,39293,39301,39305,39307,39309,39311,39315,39325,39329,39331,39333,39335,39337,39339,39345,39349,39353,39357,39361,39363,39367,39369,39381,39385,39387,39393,39395,39397,39405,39417,39419,39421,39425,39429,39431,39433,39435,39437,39439,39443,39445,39447,39451,39457,39459,39461,39463,39479,39489,39503,39505,39507,39509,39513,39521,39527,39531,39537,39539,39543,39545,39549,39551,39555,39561,39567,39571,39575,39579,39581,39585,39591,39595,39597,39599,39607,39609,39613,39617,39619,39621,39625,39629,39633,39641,39643,39645,39649,39651,39653,39661,39665,39669,39675,39679,39691,39699,39701,39709,39711,39727,39729,39751,39757,39759,39767,39771,39783,39791,39793,39795,39797,39801,39803,39815,39817,39819,39821,39833,39837,39839,39841,39843,39849,39851,39855,39857,39859,39861,39867,39869,39877,39885,39895,39897,39899,39901,39903,39911,39913,39917,39919,39925,39935,39941,39943,39951,39953,39955,39957,39961,39965,39967,39981,39983,39985,39987,39991,39995,39999,40009,40013,40015,40023,40025,40031,40033,40035,40037,40043,40047,40051,40053,40057,40059,40069,40073,40075,40085,40087,40091,40095,40099,40101,40103,40105,40107,40119,40123,40127,40131,40141,40145,40147,40151,40153,40159,40161,40163,40165,40169,40179,40183,40187,40189,40193,40197,40199,40203,40207,40211,40213,40219,40221,40225,40231,40241,40245,40247,40249,40253,40257,40259,40261,40265,40269,40273,40277,40285,40291,40293,40295,40297,40299,40301,40307,40311,40317,40325,40327,40333,40335,40337,40341,40343,40349,40355,40357,40359,40375,40379,40383,40387,40389,40395,40403,40409,40411,40413,40415,40417,40419,40423,40427,40431,40435,40437,31459,31463,31465,31469,31483,31485,31489,31491,31495,31497,31499,31505,31507,31509,31513,31527,31533,31535,31537,31541,31543,31561,31563,31567,31569,31575,31579,31581,31589,31591,31595,31597,31601,31605,31607,31609,31611,31613,31615,31617,31619,31627,31633,31635,31641,31647,31649,31653,31655,31661,31665,31667,31671,31673,31675,31679,31681,31685,31687,31697,31701,31703,31709,31711,31713,31715,31721,31723,31725,31727,31731,31733,31735,31737,31739,31745,31747,31751,31763,31765,31767,31771,31773,31775,31785,31791,31793,31795,31797,31799,31803,31805,31817,31829,31835,31837,31839,31843,31847,31853,31861,31865,31867,31869,31875,31889,31893,31895,31897,31905,31911,31913,31915,31917,31919,31921,31923,31927,31929,31931,31939,31941,31945,31947,31951,31953,31959,31963,31969,31973,31977,31979,31983,31989,31991,31995,31999,32001,32007,32009,32013,32021,32025,32027,32039,32045,32047,32051,32055,32057,32073,32077,32079,32081,32085,32097,32099,32105,32109,32117,32119,32123,32127,32129,32135,32137,32141,32149,32151,32155,32157,32159,32163,32165,32169,32171,32173,32175,32177,32183,32187,32189,32193,32207,32211,32213,32217,32221,32225,32229,32231,32237,32239,32245,32247,32249,32251,32255,32259,32265,32269,32271,32273,32275,32277,32279,32293,32297,32303,32307,32313,32315,32317,32319,32321,32329,32333,32337,32339,32341,32347,32351,32357,32359,32361,32367,32369,32371,32373,32381,32383,32387,32393,32395,32397,32403,32409,32411,32415,32417,32421,32423,32427,32429,32439,32443,32449,32459,32461,32469,32475,32477,32485,32487,32491,32495,32501,32507,32509,32511,32513,32515,32519,32523,32527,32533,32535,32541,32543,32549,32551,32571,32575,32581,32583,32585,32587,32589,32591,32597,32599,32601,32605,32607,32615,32621,32623,32629,32633,32635,32645,32647,32655,32657,32659,32661,32669,32673,32683,32685,32687,32707,32709,32711,32713,32719,32723,32727,32735,32737,32741,32743,32747,32751,32753,32771,32775,32777,32779,32789,32817,32821,32823,32827,32833,32835,32843,32845,32851,32853,32857,32859,32863,32865,32867,32869,32873,32879,32883,32885,32887,32893,32895,32899,32901,32903,32905,32907,32913,32915,32919,32921,32923,32927,32931,32949,32951,32955,32957,32961,32963,32969,32973,32977,32979,32983,32985,32987,32993,32995,32999,33003,33005,33009,33011,33019,33025,33027,33031,33035,33039,33041,33043,33049,33055,33057,33063,33065,33069,33071,33073,33075,33077,33079,33081,33083,33087,33089,33095,33099,33101,33103,33107,33111,33115,33119,33121,33123,33131,33133,33139,33141,33147,33149,33151,33153,33157,33159,33163,33165,33167,33179,33181,33183,33187,33189,33191,33193,33201,33203,33205,33207,33211,33213,33223,33225,33233,33237,33241,33243,33245,33247,33249,33253,33257,33259,33261,33273,33277,33281,33287,33289,33293,33295,33299,33301,33303,33307,33309,33317,33321,33325,33327,33329,33331,33335,33337,33341,33349,33353,33359,33361,33363,33365,33371,33379,33381,33383,33387,33389,33393,33395,33405,33407,33423,33429,33435,33437,33439,33445,33449,33451,33453,33457,33469,33471,33485,33487,33489,33491,33493,33497,33499,33503,33509,33511,33513,33515,33517,33519,33529,33533,33535,33541,33545,33547,33553,33555,33557,33559,33561,33563,33565,33569,33573,33575,33581,33593,33595,33597,33599,33601,33605,33613,33629,33631,33633,33639,33641,33643,33649,33655,33657,33663,33665,33667,33673,33681,33683,33685,33687,33689,33691,33693,33695,33697,33699,33701,33703,33705,33709,33711,33715,33717,33719,33725,33731,33733,33735,33737,33739,33741,33745,33747,33749,33751,33753,33755,33757,33761,33765,33769,33779,33781,33783,33791,33795,33801,33803,33825,33827,33829,33839,33843,33849,33855,33865,33867,33869,33877,33879,33885,33891,33893,33901,33911,33917,33919,33921,33923,33937,33941,33945,33949,33955,33957,33963,33977,33979,33981,33983,33985,33987,33989,33991,33993,34001,34005,34007,34009,34017,34019,34023,34029,34031,34039,34043,34045,34049,34055,34059,34061,34063,34069,34073,34077,34079,34087,34095,34097,34099,34101,34103,34107,34123,34125,34129,34133,34135,34137,34139,34145,34153,34155,34157,34163,34165,34167,34177,34179,34187,34189,34195,34197,34199,34203,34211,34215,34217,34219,34227,34229,34231,34233,34235,34239,34241,34247,34249,34253,34255,34257,34261,34265,34275,34277,34279,34289,34297,34301,34303,34305,34307,34311,34317,34319,34321,34323,34325,34327,34333,34337,34343,34345,34351,34353,34359,34361,34369,34371,34375,34377,34379,34387,34389,34401,34405,34409,34411,34415,34419,34435,34439,34443,34445,34451,34457,34475,34477,34479,34481,34483,34489,34505,34507,34509,34511,34513,34517,34519,34521,34525,34529,34531,34535,34537,34539,34549,34553,34555,34557,34559,34563,34569,34573,34575,34579,34583,34585,34587,34589,34591,34595,34597,34601,34605,34607,34611,34617,34621,34623,34625,34627,34631,34633,34635,34637,34639,34641,34649,34651,34663,34665,34677,34679,34681,34683,34687,34691,34693,34695,34699,34703,34707,34709,34711,34713,34715,34719,34721,34727,34733,34735,34737,34739,34741,34747,34755,34757,34765,34767,34779,34781,34785,34787,34789,34791,34793,34795,34799,34805,34811,34819,34827,34833,34837,34839,34841,34843,34845,34849,34853,34857,34861,34865,34873,34879,34881,34887,34891,34897,34901,34903,34915,34917,34921,34923,34927,34929,34935,34939,34941,34943,34951,34955,34957,34961,34963,34969,34971,34975,34977,34989,35001,35011,35013,35015,35017,35019,35023,35027,35031,35033,35037,35041,35049,35051,35065,35069,35077,35081,35087,35089,35091,35093,35095,35099,35101,35109,35113,35115,35119,35127,35129,35131,35137,35139,35141,35143,35145,35149,35151,35153,35161,35163,35167,35169,35173,35177,35179,35189,35195,35201,35205,35211,35221,35225,35227,35229,35233,35235,35241,35247,35249,35253,35259,35261,35263,35269,35273,35277,35279,35283,35285,35287,35289,35297,35299,35301,35303,35305,35307,35309,35311,35317,35319,35327,35335,35339,35347,35349,35351,35353,35355,35357,35359,35361,35363,35367,35369,35375,35381,35387,35389,35393,35395,35399,35401,35403,35409,35413,35415,35419,35423,35425,35431,35435,35439,35441,35443,35445,35447,35449,35451,35453,35455,35459,35463,35465,35467,35473,35477,35479,35483,35489,35493,35495,35497,35499,35505,35507,35509,35517,35519,35527,35531,35535,35537,35539,35547,35549,35551,35553,35555,35557,35559,35561,35569,35571,35573,35581,35585,35591,35597,35599,35603,35613,35617,35621,35625,35627,35629,35633,35637,35639,35641,35649,35653,35661,35663,35665,35671,35675,35679,35681,35683,35685,35695,35697,35701,35703,35705,35707,35709,35719,35725,35727,35729,35733,35743,35745,35749,35753,35757,35765,35775,35779,35783,35785,35789,35791,35807,35809,35815,35819,35821,35823,35827,35829,35837,35841,35843,35849,35853,35855,35859,35863,35865,35877,35879,35883,35885,35893,35903,35909,35911,35919,35927,35929,35939,35943,35945,35947,35949,35955,35957,35961,35963,35969,35971,35975,35977,35979,35981,35985,35995,35997,36017,36023,36025,36029,36031,36043,36051,36053,36059,36061,36063,36069,36071,36075,36077,36083,36085,36087,36093,36095,36099,36109,36111,36113,36119,36121,36125,36129,36133,36137,36145,36151,36153,36155,36157,36159,36167,36173,36175,36177,36179,36181,36187,36189,36191,36197,36201,36211,36215,36217,36221,36223,36229,36231,36233,36235,36237,36241,36247,36249,36259,36261,36267,36275,36277,36279,36281,36285,36287,36289,36291,36297,36299,36307,36309,36313,36315,36317,36319,36325,36329,36331,36339,36343,36345,36351,36353,36355,36359,36365,36369,36373,36375,36377,36379,36381,36383,36387,36389,36391,36393,36395,36397,36399,36403,36405,36407,36411,36415,36421,36427,36429,36439,36441,36443,36445,36447,36449,36451,36457,36459,36463,36467,36473,36477,36481,36483,36485,36487,36491,36493,36499,36507,36511,36517,36519,36521,36523,36527,36531,36533,36535,36537,36541,36547,36549,36551,36555,36557,36559,36561,36563,36565,36573,36583,36585,36587,36589,36591,36595,36597,36603,36611,36613,36617,36621,36623,36629,36635,36639,36641,36643,36647,36655,36663,36669,36675,36679,36689,36691,36695,36697,36703,36705,36711,36715,36717,36719,36721,36729,36731,36737,36739,36743,36753,36755,36757,36765,36767,36781,36783,36785,36787,36789,36795,36797,36801,36805,36809,36813,36815,36817,36819,36829,36835,36837,36843,36847,36857,36859,36867,36871,36873,36879,36883,36887,36891,36897,36913,36917,36927,36933,36941,36947,36951,36957,36959,36961,36967,36975,36977,36981,36989,36993,36995,36997,37001,37003,37005,37007,37009,37011,37013,37019,37021,37023,37025,37027,37029,37031,37033,37035,37037,37041,37043,37045,37047,37049,37055,37057,37061,37069,37073,37077,37085,37089,37091,37095,37097,37099,37103,37107,37109,37117,37121,37131,37133,37135,37137,37139,37147,37149,37151,37153,37157,37159,37161,37163,37165,37175,37177,37179,37185,37187,37197,37201,37203,37207,37213,37219,37231,37241,37247,37249,37255,37259,37263,37271,37277,37281,37285,37287,37289,37295,37301,37315,37317,37323,37325,37331,37333,37335,37337,37339,37341,37343,37351,37353,37355,37359,37361,37365,37369,37375,37381,37387,37391,37393,37401,37411,37415,37417,37423,37427,37439,37445,37449,37451,37453,37459,37461,37471,37473,37479,37481,37489,37491,37495,37497,37501,37507,37511,37513,37519,37521,37525,37527,37539,37541,37545,37549,37557,37567,37569,37575,37589,37591,37593,37595,37597,37599,37601,37603,37605,37609,37615,37619,37623,37629,37631,37639,37641,37643,37645,37651,37657,37663,37665,37667,37669,37671,37673,37675,37677,37679,37693,37699,37705,37713,37717,37723,37727,37729,37741,37743,37749,37755,37757,37763,37767,37773,37779,37785,37787,37789,37791,37793,37797,37801,37807,37809,37821,37823,37827,37831,37845,37849,37857,37861,37865,37867,37869,37873,37875,37879,37881,37883,37887,37891,37893,37899,37901,37903,37909,37911,37913,37915,37917,37927,37935,37937,37939,37945,37947,37951,37957,37963,37967,37969,37973,37975,37979,37991,38001,38003,38005,38007,38009,38017,38023,38027,38029,38033,38035,38045,38049,38051,38061,38063,38069,38071,38073,38077,38081,38087,38089,38095,38097,38101,38105,38107,38109,38125,38127,38129,38133,38135,38141,38143,38145,38155,38157,38163,38173,38179,38185,38189,38197,38201,38203,38207,38209,38215,38217,38225,38229,38239,38241,38245,38249,38251,38257,38259,38265,38273,38279,38287,38289,38293,38295,38299,38303,38305,38307,38317,38319,38321,38323,38325,38327,38329,38339,38341,38343,38347,38357,38359,38361,38363,38365,38369,38371,38373,38387,38393,38395,38399,38401,38403,38405,38407,38409,38411,38423,38437,38439,38445,38447,38449,38451,38453,38455,38457,38459,38461,38463,38467,38471,38473,38475,38477,38485,38493,38497,38503,38505,38509,38515,38521,38525,38527,38531,38533,38537,38539,38541,38545,38547,38557,38561,38565,38569,38573,38577,38581,38587,38589,38591,38593,38597,38599,38603,38605,38607,38609,38611,38613,38617,38619,38623,38625,38629,38637,38641,38643,38647,38649,38651,38653,38655,38659,38661,38665,38667,38671,38673,38683,38685,38687,38695,38707,38713,38719,38721,38725,38735,38737,38739,38751,38753,38755,38765,38767,38773,38779,38783,38785,38789,38793,38795,38813,38815,38817,38827,38829,38831,38833,38835,38837,38841,38857,38861,38865,38871,38873,38875,38877,38883,38887,38897,38899,38901,38903,38905,38913,38915,38917,38921,38925,38927,38935,38937,38951,38957,38963,38965,38969,38973,38977,38979,38983,38985,38991,39003,39013,39019,39021,39023,39027,39029,39031,39035,39041,39043,39047,39049,39051,39055,39057,39061,39073,39075,39077,39085,39093,39095,39097,39101,39105,39107,39109,39111,39125,39127,39129,39133,39139,39141,39149,39153,39155,39157,39159,39161,39163,39165,39171,39177,39183,39185,39189,39191,39199,39217,39223,39227,39229,39233,39237,39239,39243,39247,39251,39253,39257,39265,39269,39275,39279,39281,39285,39287,39295,39297,39299,39303,39313,39317,39319,39321,39323,39327,39341,39343,39347,39351,39355,39359,39365,39371,39373,39375,39377,39379,39389,39391,39399,39401,39403,39407,39409,39411,39413,39415,39423,39427,39441,39449,39453,39455,39465,39467,39469,39471,39473,39475,39477,39481,39483,39485,39487,39491,39493,39495,39497,39499,39501,39511,39517,39519,39523,39525,39529,39533,39535,39541,39547,39553,39557,39559,39563,39565,39569,39573,39577,39583,39587,39589,39593,39601,39603,39605,39611,39615,39623,39627,39631,39635,39637,39639,39647,39655,39657,39659,39667,39671,39673,39677,39681,39683,39685,39687,39689,39693,39695,39697,39703,39705,39707,39713,39715,39717,39719,39721,39723,39725,39731,39733,39735,39737,39739,39741,39743,39745,39747,39749,39753,39755,39763,39765,39775,39779,39789,39799,39805,39807,39809,39811,39813,39823,39825,39827,39829,39831,39835,39845,39847,39853,39863,39865,39871,39873,39875,39879,39881,39883,39887,39889,39891,39893,39905,39907,39909,39915,39921,39923,39927,39929,39931,39933,39937,39939,39945,39947,39949,39959,39963,39969,39971,39973,39975,39977,39979,39989,39993,39997,40001,40003,40005,40007,40011,40017,40019,40021,40027,40029,40039,40041,40045,40049,40055,40061,40063,40065,40067,40071,40077,40079,40081,40083,40089,40093,40097,40109,40111,40113,40115,40117,40121,40125,40129,40133,40135,40137,40139,40143,40149,40155,40157,40167,40171,40173,40175,40177,40181,40185,40191,40195,40201,40205,40209,40215,40217,40223,40227,40229,40233,40235,40237,40239,40243,40251,40255,40263,40267,40271,40275,40279,40281,40283,40287,40289,40303,40305,40309,40313,40315,40319,40321,40323,40329,40331,40339,40345,40347,40351,40353,40361,40363,40365,40367,40369,40371,40373,40377,40381,40385,40391,40393,40397,40399,40401,40405,40407,40421,40425,40433 )) AND ( media_resources.user_id = 10262 OR
 media_resources.view = true
 OR
 EXISTS ( SELECT 'true' FROM "userpermissions" WHERE "userpermissions"."view" = 't' AND "userpermissions"."user_id" = 10262 AND (userpermissions.media_resource_id = media_resources.id) )
 OR
 EXISTS ( SELECT 'true' FROM "grouppermissions" INNER JOIN "groups" ON "groups"."id" = "grouppermissions"."group_id" INNER JOIN "groups_users" ON "groups_users"."group_id" = "groups"."id" INNER JOIN "users" ON "users"."id" = "groups_users"."user_id" WHERE "grouppermissions"."view" = 't' AND (grouppermissions.media_resource_id = media_resources.id) AND (users.id = 10262) )
) LIMIT 1;
SELECT * FROM ( SELECT meta_contexts.name AS context_name, 
 mt3.de_ch AS context_label,
 meta_keys.id AS key_name, 
 mt2.de_ch AS key_label,
 COUNT(meta_data.media_resource_id) AS count,
 meta_context_groups.position AS context_group_position,
 meta_contexts.position AS context_position,
 meta_key_definitions.position AS definition_position,
 meta_terms.id, meta_terms.de_ch as value
 FROM meta_contexts
 INNER JOIN meta_context_groups ON meta_context_groups.id = meta_contexts.meta_context_group_id
 INNER JOIN meta_key_definitions ON meta_key_definitions.meta_context_name = meta_contexts.name
 INNER JOIN meta_terms mt2 ON meta_key_definitions.label_id = mt2.id
 INNER JOIN meta_terms mt3 ON meta_contexts.label_id = mt3.id
 INNER JOIN meta_keys ON meta_key_definitions.meta_key_id = meta_keys.id
 INNER JOIN meta_data ON meta_data.meta_key_id = meta_keys.id
 INNER JOIN meta_data_meta_terms ON meta_data_meta_terms.meta_datum_id = meta_data.id
 INNER JOIN meta_terms ON meta_data_meta_terms.meta_term_id = meta_terms.id
 WHERE meta_keys.meta_datum_object_type = 'MetaDatumMetaTerms'
 AND meta_data.media_resource_id IN (SELECT media_resources.id FROM "media_resources" LEFT JOIN full_texts ON media_resources.id = full_texts.media_resource_id WHERE "media_resources"."type" IN ('MediaEntry', 'MediaSet', 'FilterSet') AND ( media_resources.user_id = 10262
 OR
 media_resources.view = true
 OR
 EXISTS ( SELECT 'true' FROM "userpermissions" WHERE "userpermissions"."view" = 't' AND "userpermissions"."user_id" = 10262 AND (userpermissions.media_resource_id = media_resources.id) ) 
 OR
 EXISTS ( SELECT 'true' FROM "grouppermissions" INNER JOIN "groups" ON "groups"."id" = "grouppermissions"."group_id" INNER JOIN "groups_users" ON "groups_users"."group_id" = "groups"."id" INNER JOIN "users" ON "users"."id" = "groups_users"."user_id" WHERE "grouppermissions"."view" = 't' AND (grouppermissions.media_resource_id = media_resources.id) AND (users.id = 10262) ) 
) AND (("full_texts"."text" ILIKE '%india%')) ORDER BY "media_resources"."created_at" DESC)
 GROUP BY meta_terms.id, meta_contexts.name, mt3.de_ch, meta_keys.id, mt2.de_ch,
 meta_context_groups.position, meta_contexts.position, meta_key_definitions.position UNION SELECT meta_contexts.name AS context_name, 
 mt3.de_ch AS context_label,
 meta_keys.id AS key_name, 
 mt2.de_ch AS key_label,
 COUNT(meta_data.media_resource_id) AS count,
 meta_context_groups.position AS context_group_position,
 meta_contexts.position AS context_position,
 meta_key_definitions.position AS definition_position,
 meta_terms.id, meta_terms.de_ch as value
 FROM meta_contexts
 INNER JOIN meta_context_groups ON meta_context_groups.id = meta_contexts.meta_context_group_id
 INNER JOIN meta_key_definitions ON meta_key_definitions.meta_context_name = meta_contexts.name
 INNER JOIN meta_terms mt2 ON meta_key_definitions.label_id = mt2.id
 INNER JOIN meta_terms mt3 ON meta_contexts.label_id = mt3.id
 INNER JOIN meta_keys ON meta_key_definitions.meta_key_id = meta_keys.id
 INNER JOIN meta_data ON meta_data.meta_key_id = meta_keys.id
 INNER JOIN keywords ON keywords.meta_datum_id = meta_data.id
 INNER JOIN meta_terms ON keywords.meta_term_id = meta_terms.id
 WHERE meta_keys.meta_datum_object_type = 'MetaDatumKeywords'
 AND meta_data.media_resource_id IN (SELECT media_resources.id FROM "media_resources" LEFT JOIN full_texts ON media_resources.id = full_texts.media_resource_id WHERE "media_resources"."type" IN ('MediaEntry', 'MediaSet', 'FilterSet') AND ( media_resources.user_id = 10262
 OR
 media_resources.view = true
 OR
 EXISTS ( SELECT 'true' FROM "userpermissions" WHERE "userpermissions"."view" = 't' AND "userpermissions"."user_id" = 10262 AND (userpermissions.media_resource_id = media_resources.id) ) 
 OR
 EXISTS ( SELECT 'true' FROM "grouppermissions" INNER JOIN "groups" ON "groups"."id" = "grouppermissions"."group_id" INNER JOIN "groups_users" ON "groups_users"."group_id" = "groups"."id" INNER JOIN "users" ON "users"."id" = "groups_users"."user_id" WHERE "grouppermissions"."view" = 't' AND (grouppermissions.media_resource_id = media_resources.id) AND (users.id = 10262) ) 
) AND (("full_texts"."text" ILIKE '%india%')) ORDER BY "media_resources"."created_at" DESC)
 GROUP BY meta_terms.id, meta_contexts.name, mt3.de_ch, meta_keys.id, mt2.de_ch,
 meta_context_groups.position, meta_contexts.position, meta_key_definitions.position UNION SELECT meta_contexts.name AS context_name, 
 mt3.de_ch AS context_label,
 meta_keys.id AS key_name, 
 mt2.de_ch AS key_label,
 COUNT(meta_data.media_resource_id) AS count,
 meta_context_groups.position AS context_group_position,
 meta_contexts.position AS context_position,
 meta_key_definitions.position AS definition_position,
 groups.id, groups.name AS value
 FROM meta_contexts
 INNER JOIN meta_context_groups ON meta_context_groups.id = meta_contexts.meta_context_group_id
 INNER JOIN meta_key_definitions ON meta_key_definitions.meta_context_name = meta_contexts.name
 INNER JOIN meta_terms mt2 ON meta_key_definitions.label_id = mt2.id
 INNER JOIN meta_terms mt3 ON meta_contexts.label_id = mt3.id
 INNER JOIN meta_keys ON meta_key_definitions.meta_key_id = meta_keys.id
 INNER JOIN meta_data ON meta_data.meta_key_id = meta_keys.id
 INNER JOIN meta_data_meta_departments ON meta_data_meta_departments.meta_datum_id = meta_data.id
 INNER JOIN groups ON meta_data_meta_departments.meta_department_id = groups.id
 WHERE meta_keys.meta_datum_object_type = 'MetaDatumDepartments'
 AND meta_data.media_resource_id IN (SELECT media_resources.id FROM "media_resources" LEFT JOIN full_texts ON media_resources.id = full_texts.media_resource_id WHERE "media_resources"."type" IN ('MediaEntry', 'MediaSet', 'FilterSet') AND ( media_resources.user_id = 10262
 OR
 media_resources.view = true
 OR
 EXISTS ( SELECT 'true' FROM "userpermissions" WHERE "userpermissions"."view" = 't' AND "userpermissions"."user_id" = 10262 AND (userpermissions.media_resource_id = media_resources.id) )
 OR
 EXISTS ( SELECT 'true' FROM "grouppermissions" INNER JOIN "groups" ON "groups"."id" = "grouppermissions"."group_id" INNER JOIN "groups_users" ON "groups_users"."group_id" = "groups"."id" INNER JOIN "users" ON "users"."id" = "groups_users"."user_id" WHERE "grouppermissions"."view" = 't' AND (grouppermissions.media_resource_id = media_resources.id) AND (users.id = 10262) ) 
) AND (("full_texts"."text" ILIKE '%india%')) ORDER BY "media_resources"."created_at" DESC)
 GROUP BY groups.id, meta_contexts.name, mt3.de_ch, meta_keys.id, mt2.de_ch,
 meta_context_groups.position, meta_contexts.position, meta_key_definitions.position ) AS t1 ORDER BY context_group_position, context_position, definition_position;
SELECT * FROM ( SELECT meta_contexts.name AS context_name, 
 mt3.de_ch AS context_label,
 meta_keys.id AS key_name, 
 mt2.de_ch AS key_label,
 COUNT(meta_data.media_resource_id) AS count,
 meta_context_groups.position AS context_group_position,
 meta_contexts.position AS context_position,
 meta_key_definitions.position AS definition_position,
 meta_terms.id, meta_terms.de_ch as value
 FROM meta_contexts
 INNER JOIN meta_context_groups ON meta_context_groups.id = meta_contexts.meta_context_group_id
 INNER JOIN meta_key_definitions ON meta_key_definitions.meta_context_name = meta_contexts.name
 INNER JOIN meta_terms mt2 ON meta_key_definitions.label_id = mt2.id
 INNER JOIN meta_terms mt3 ON meta_contexts.label_id = mt3.id
 INNER JOIN meta_keys ON meta_key_definitions.meta_key_id = meta_keys.id
 INNER JOIN meta_data ON meta_data.meta_key_id = meta_keys.id
 INNER JOIN meta_data_meta_terms ON meta_data_meta_terms.meta_datum_id = meta_data.id
 INNER JOIN meta_terms ON meta_data_meta_terms.meta_term_id = meta_terms.id
 WHERE meta_keys.meta_datum_object_type = 'MetaDatumMetaTerms'
 AND meta_data.media_resource_id IN (SELECT media_resources.id FROM "media_resources" LEFT JOIN full_texts ON media_resources.id = full_texts.media_resource_id WHERE "media_resources"."type" IN ('MediaEntry', 'MediaSet', 'FilterSet') AND "media_resources"."user_id" = 10262 AND ( media_resources.user_id = 10262
 OR
 media_resources.view = true
 OR
 EXISTS ( SELECT 'true' FROM "userpermissions" WHERE "userpermissions"."view" = 't' AND "userpermissions"."user_id" = 10262 AND (userpermissions.media_resource_id = media_resources.id) ) 
 OR
 EXISTS ( SELECT 'true' FROM "grouppermissions" INNER JOIN "groups" ON "groups"."id" = "grouppermissions"."group_id" INNER JOIN "groups_users" ON "groups_users"."group_id" = "groups"."id" INNER JOIN "users" ON "users"."id" = "groups_users"."user_id" WHERE "grouppermissions"."view" = 't' AND (grouppermissions.media_resource_id = media_resources.id) AND (users.id = 10262) ) 
) AND (("full_texts"."text" ILIKE '%india%')) ORDER BY "media_resources"."created_at" DESC)
 GROUP BY meta_terms.id, meta_contexts.name, mt3.de_ch, meta_keys.id, mt2.de_ch,
 meta_context_groups.position, meta_contexts.position, meta_key_definitions.position UNION SELECT meta_contexts.name AS context_name, 
 mt3.de_ch AS context_label,
 meta_keys.id AS key_name, 
 mt2.de_ch AS key_label,
 COUNT(meta_data.media_resource_id) AS count,
 meta_context_groups.position AS context_group_position,
 meta_contexts.position AS context_position,
 meta_key_definitions.position AS definition_position,
 meta_terms.id, meta_terms.de_ch as value
 FROM meta_contexts
 INNER JOIN meta_context_groups ON meta_context_groups.id = meta_contexts.meta_context_group_id
 INNER JOIN meta_key_definitions ON meta_key_definitions.meta_context_name = meta_contexts.name
 INNER JOIN meta_terms mt2 ON meta_key_definitions.label_id = mt2.id
 INNER JOIN meta_terms mt3 ON meta_contexts.label_id = mt3.id
 INNER JOIN meta_keys ON meta_key_definitions.meta_key_id = meta_keys.id
 INNER JOIN meta_data ON meta_data.meta_key_id = meta_keys.id
 INNER JOIN keywords ON keywords.meta_datum_id = meta_data.id
 INNER JOIN meta_terms ON keywords.meta_term_id = meta_terms.id
 WHERE meta_keys.meta_datum_object_type = 'MetaDatumKeywords'
 AND meta_data.media_resource_id IN (SELECT media_resources.id FROM "media_resources" LEFT JOIN full_texts ON media_resources.id = full_texts.media_resource_id WHERE "media_resources"."type" IN ('MediaEntry', 'MediaSet', 'FilterSet') AND "media_resources"."user_id" = 10262 AND ( media_resources.user_id = 10262
 OR
 media_resources.view = true
 OR
 EXISTS ( SELECT 'true' FROM "userpermissions" WHERE "userpermissions"."view" = 't' AND "userpermissions"."user_id" = 10262 AND (userpermissions.media_resource_id = media_resources.id) ) 
 OR
 EXISTS ( SELECT 'true' FROM "grouppermissions" INNER JOIN "groups" ON "groups"."id" = "grouppermissions"."group_id" INNER JOIN "groups_users" ON "groups_users"."group_id" = "groups"."id" INNER JOIN "users" ON "users"."id" = "groups_users"."user_id" WHERE "grouppermissions"."view" = 't' AND (grouppermissions.media_resource_id = media_resources.id) AND (users.id = 10262) ) 
) AND (("full_texts"."text" ILIKE '%india%')) ORDER BY "media_resources"."created_at" DESC)
 GROUP BY meta_terms.id, meta_contexts.name, mt3.de_ch, meta_keys.id, mt2.de_ch,
 meta_context_groups.position, meta_contexts.position, meta_key_definitions.position UNION SELECT meta_contexts.name AS context_name, 
 mt3.de_ch AS context_label,
 meta_keys.id AS key_name, 
 mt2.de_ch AS key_label,
 COUNT(meta_data.media_resource_id) AS count,
 meta_context_groups.position AS context_group_position,
 meta_contexts.position AS context_position,
 meta_key_definitions.position AS definition_position,
 groups.id, groups.name AS value
 FROM meta_contexts
 INNER JOIN meta_context_groups ON meta_context_groups.id = meta_contexts.meta_context_group_id
 INNER JOIN meta_key_definitions ON meta_key_definitions.meta_context_name = meta_contexts.name
 INNER JOIN meta_terms mt2 ON meta_key_definitions.label_id = mt2.id
 INNER JOIN meta_terms mt3 ON meta_contexts.label_id = mt3.id
 INNER JOIN meta_keys ON meta_key_definitions.meta_key_id = meta_keys.id
 INNER JOIN meta_data ON meta_data.meta_key_id = meta_keys.id
 INNER JOIN meta_data_meta_departments ON meta_data_meta_departments.meta_datum_id = meta_data.id
 INNER JOIN groups ON meta_data_meta_departments.meta_department_id = groups.id
 WHERE meta_keys.meta_datum_object_type = 'MetaDatumDepartments'
 AND meta_data.media_resource_id IN (SELECT media_resources.id FROM "media_resources" LEFT JOIN full_texts ON media_resources.id = full_texts.media_resource_id WHERE "media_resources"."type" IN ('MediaEntry', 'MediaSet', 'FilterSet') AND "media_resources"."user_id" = 10262 AND ( media_resources.user_id = 10262
 OR
 media_resources.view = true
 OR
 EXISTS ( SELECT 'true' FROM "userpermissions" WHERE "userpermissions"."view" = 't' AND "userpermissions"."user_id" = 10262 AND (userpermissions.media_resource_id = media_resources.id) ) 
 OR
 EXISTS ( SELECT 'true' FROM "grouppermissions" INNER JOIN "groups" ON "groups"."id" = "grouppermissions"."group_id" INNER JOIN "groups_users" ON "groups_users"."group_id" = "groups"."id" INNER JOIN "users" ON "users"."id" = "groups_users"."user_id" WHERE "grouppermissions"."view" = 't' AND (grouppermissions.media_resource_id = media_resources.id) AND (users.id = 10262) ) 
) AND (("full_texts"."text" ILIKE '%india%')) ORDER BY "media_resources"."created_at" DESC)
 GROUP BY groups.id, meta_contexts.name, mt3.de_ch, meta_keys.id, mt2.de_ch,
 meta_context_groups.position, meta_contexts.position, meta_key_definitions.position ) AS t1 ORDER BY context_group_position, context_position, definition_position;
SELECT meta_term_id, COUNT(meta_term_id) AS count FROM "keywords" INNER JOIN "meta_data" ON "meta_data"."id" = "keywords"."meta_datum_id" INNER JOIN "media_resources" ON "media_resources"."id" = "meta_data"."media_resource_id" WHERE (media_resources.view = true) GROUP BY keywords.meta_term_id ORDER BY count DESC LIMIT 12;
SELECT media_resources.id FROM "media_resources" WHERE "media_resources"."type" IN ('MediaEntry', 'MediaSet', 'FilterSet') AND (media_resources.view = true) AND (media_resources.id IN (SELECT media_resources.id FROM "media_resources" INNER JOIN "meta_data" ON "meta_data"."media_resource_id" = "media_resources"."id" INNER JOIN meta_data_meta_departments ON meta_data_meta_departments.meta_datum_id = meta_data.id));
SELECT COUNT(media_resources.id) FROM "media_resources" WHERE "media_resources"."type" IN ('MediaEntry', 'MediaSet', 'FilterSet') AND (media_resources.view = true) AND (media_resources.id IN (SELECT media_resources.id FROM "media_resources" INNER JOIN "meta_data" ON "meta_data"."media_resource_id" = "media_resources"."id" INNER JOIN meta_data_meta_departments ON meta_data_meta_departments.meta_datum_id = meta_data.id));
SELECT media_resources.id FROM "media_resources";
SELECT COUNT(media_resources.id) FROM "media_resources" WHERE "media_resources"."type" IN ('MediaEntry', 'MediaSet', 'FilterSet') AND (media_resources.view = true) AND (media_resources.id IN (SELECT media_resources.id FROM "media_resources" INNER JOIN "meta_data" ON "meta_data"."media_resource_id" = "media_resources"."id" INNER JOIN meta_data_meta_departments ON meta_data_meta_departments.meta_datum_id = meta_data.id));
SELECT meta_term_id, COUNT(meta_term_id) AS count FROM "keywords" INNER JOIN "meta_data" ON "meta_data"."id" = "keywords"."meta_datum_id" INNER JOIN "media_resources" ON "media_resources"."id" = "meta_data"."media_resource_id" WHERE ( media_resources.user_id = 10262
 OR
 media_resources.view = true
 OR
 EXISTS ( SELECT 'true' FROM "userpermissions" WHERE "userpermissions"."view" = 't' AND "userpermissions"."user_id" = 10262 AND (userpermissions.media_resource_id = media_resources.id) ) 
 OR
 EXISTS ( SELECT 'true' FROM "grouppermissions" INNER JOIN "groups" ON "groups"."id" = "grouppermissions"."group_id" INNER JOIN "groups_users" ON "groups_users"."group_id" = "groups"."id" INNER JOIN "users" ON "users"."id" = "groups_users"."user_id" WHERE "grouppermissions"."view" = 't' AND (grouppermissions.media_resource_id = media_resources.id) AND (users.id = 10262) ) 
) GROUP BY keywords.meta_term_id ORDER BY count DESC LIMIT 25;
SELECT media_files.media_type as value, count(*) as count FROM "media_files" INNER JOIN "media_resources" ON "media_resources"."id" = "media_files"."media_entry_id" AND "media_resources"."type" IN ('MediaEntry') WHERE "media_resources"."id" IN (SELECT "media_resources"."id" FROM "media_resources" LEFT JOIN full_texts ON media_resources.id = full_texts.media_resource_id WHERE "media_resources"."type" IN ('MediaEntry', 'MediaSet', 'FilterSet') AND ( media_resources.user_id = 10262
 OR
 media_resources.view = true
 OR
 EXISTS ( SELECT 'true' FROM "userpermissions" WHERE "userpermissions"."view" = 't' AND "userpermissions"."user_id" = 10262 AND (userpermissions.media_resource_id = media_resources.id) ) 
 OR
 EXISTS ( SELECT 'true' FROM "grouppermissions" INNER JOIN "groups" ON "groups"."id" = "grouppermissions"."group_id" INNER JOIN "groups_users" ON "groups_users"."group_id" = "groups"."id" INNER JOIN "users" ON "users"."id" = "groups_users"."user_id" WHERE "grouppermissions"."view" = 't' AND (grouppermissions.media_resource_id = media_resources.id) AND (users.id = 10262) ) 
) AND (("full_texts"."text" ILIKE '%india%')) ORDER BY "media_resources"."created_at" DESC) GROUP BY media_files.media_type ORDER BY count DESC;
SELECT groups.*, COUNT(grouppermissions.media_resource_id) AS count FROM "groups" INNER JOIN groups_users ON groups_users.group_id = groups.id AND groups_users.user_id = 10262 INNER JOIN grouppermissions ON grouppermissions.group_id = groups.id AND grouppermissions.view = TRUE AND grouppermissions.media_resource_id IN (SELECT media_resources.id FROM "media_resources" LEFT JOIN full_texts ON media_resources.id = full_texts.media_resource_id WHERE "media_resources"."type" IN ('MediaEntry', 'MediaSet', 'FilterSet') AND ( media_resources.user_id = 10262
 OR
 media_resources.view = true
 OR
 EXISTS ( SELECT 'true' FROM "userpermissions" WHERE "userpermissions"."view" = 't' AND "userpermissions"."user_id" = 10262 AND (userpermissions.media_resource_id = media_resources.id) ) 
 OR
 EXISTS ( SELECT 'true' FROM "grouppermissions" INNER JOIN "groups" ON "groups"."id" = "grouppermissions"."group_id" INNER JOIN "groups_users" ON "groups_users"."group_id" = "groups"."id" INNER JOIN "users" ON "users"."id" = "groups_users"."user_id" WHERE "grouppermissions"."view" = 't' AND (grouppermissions.media_resource_id = media_resources.id) AND (users.id = 10262) ) 
) AND (("full_texts"."text" ILIKE '%india%')) ORDER BY "media_resources"."created_at" DESC) GROUP BY groups.id ORDER BY count DESC, name;
SELECT COUNT(*) FROM "media_resources" WHERE "media_resources"."type" IN ('MediaEntry', 'MediaSet', 'FilterSet') AND ( media_resources.user_id = 10262
 OR
 media_resources.view = true
 OR
 EXISTS ( SELECT 'true' FROM "userpermissions" WHERE "userpermissions"."view" = 't' AND "userpermissions"."user_id" = 10262 AND (userpermissions.media_resource_id = media_resources.id) ) 
 OR
 EXISTS ( SELECT 'true' FROM "grouppermissions" INNER JOIN "groups" ON "groups"."id" = "grouppermissions"."group_id" INNER JOIN "groups_users" ON "groups_users"."group_id" = "groups"."id" INNER JOIN "users" ON "users"."id" = "groups_users"."user_id" WHERE "grouppermissions"."view" = 't' AND (grouppermissions.media_resource_id = media_resources.id) AND (users.id = 10262) ) 
) AND (media_resources.id IN (SELECT media_resources.id FROM "media_resources" INNER JOIN "meta_data" ON "meta_data"."media_resource_id" = "media_resources"."id" INNER JOIN meta_data_meta_departments ON meta_data_meta_departments.meta_datum_id = meta_data.id));
SELECT COUNT(media_resources.id) FROM "media_resources" WHERE "media_resources"."type" IN ('MediaEntry', 'MediaSet', 'FilterSet') AND ( media_resources.user_id = 10262
 OR
 media_resources.view = true
 OR
 EXISTS ( SELECT 'true' FROM "userpermissions" WHERE "userpermissions"."view" = 't' AND "userpermissions"."user_id" = 10262 AND (userpermissions.media_resource_id = media_resources.id) ) 
 OR
 EXISTS ( SELECT 'true' FROM "grouppermissions" INNER JOIN "groups" ON "groups"."id" = "grouppermissions"."group_id" INNER JOIN "groups_users" ON "groups_users"."group_id" = "groups"."id" INNER JOIN "users" ON "users"."id" = "groups_users"."user_id" WHERE "grouppermissions"."view" = 't' AND (grouppermissions.media_resource_id = media_resources.id) AND (users.id = 10262) ) 
) AND (media_resources.id IN (SELECT media_resources.id FROM "media_resources" INNER JOIN "meta_data" ON "meta_data"."media_resource_id" = "media_resources"."id" INNER JOIN meta_data_meta_departments ON meta_data_meta_departments.meta_datum_id = meta_data.id));
SELECT * FROM ( SELECT meta_contexts.name AS context_name, 
 mt3.de_ch AS context_label,
 meta_keys.id AS key_name, 
 mt2.de_ch AS key_label,
 COUNT(meta_data.media_resource_id) AS count,
 meta_context_groups.position AS context_group_position,
 meta_contexts.position AS context_position,
 meta_key_definitions.position AS definition_position,
 meta_terms.id, meta_terms.de_ch as value
 FROM meta_contexts
 INNER JOIN meta_context_groups ON meta_context_groups.id = meta_contexts.meta_context_group_id
 INNER JOIN meta_key_definitions ON meta_key_definitions.meta_context_name = meta_contexts.name
 INNER JOIN meta_terms mt2 ON meta_key_definitions.label_id = mt2.id
 INNER JOIN meta_terms mt3 ON meta_contexts.label_id = mt3.id
 INNER JOIN meta_keys ON meta_key_definitions.meta_key_id = meta_keys.id
 INNER JOIN meta_data ON meta_data.meta_key_id = meta_keys.id
 INNER JOIN meta_data_meta_terms ON meta_data_meta_terms.meta_datum_id = meta_data.id
 INNER JOIN meta_terms ON meta_data_meta_terms.meta_term_id = meta_terms.id
 WHERE meta_keys.meta_datum_object_type = 'MetaDatumMetaTerms'
 AND meta_data.media_resource_id IN (SELECT media_resources.id FROM "media_resources" WHERE "media_resources"."type" IN ('MediaEntry', 'MediaSet', 'FilterSet') AND ( media_resources.user_id = 10262
 OR
 media_resources.view = true
 OR
 EXISTS ( SELECT 'true' FROM "userpermissions" WHERE "userpermissions"."view" = 't' AND "userpermissions"."user_id" = 10262 AND (userpermissions.media_resource_id = media_resources.id) ) 
 OR
 EXISTS ( SELECT 'true' FROM "grouppermissions" INNER JOIN "groups" ON "groups"."id" = "grouppermissions"."group_id" INNER JOIN "groups_users" ON "groups_users"."group_id" = "groups"."id" INNER JOIN "users" ON "users"."id" = "groups_users"."user_id" WHERE "grouppermissions"."view" = 't' AND (grouppermissions.media_resource_id = media_resources.id) AND (users.id = 10262) ) 
) AND (media_resources.id IN (SELECT media_resources.id FROM "media_resources" INNER JOIN "meta_data" ON "meta_data"."media_resource_id" = "media_resources"."id" INNER JOIN "meta_keys" ON "meta_keys"."id" = "meta_data"."meta_key_id" INNER JOIN meta_data_meta_terms ON meta_data_meta_terms.meta_datum_id = meta_data.id WHERE "meta_keys"."id" = 'project type' AND "meta_keys"."meta_datum_object_type" = 'MetaDatumMetaTerms')))
 GROUP BY meta_terms.id, meta_contexts.name, mt3.de_ch, meta_keys.id, mt2.de_ch,
 meta_context_groups.position, meta_contexts.position, meta_key_definitions.position UNION SELECT meta_contexts.name AS context_name, 
 mt3.de_ch AS context_label,
 meta_keys.id AS key_name, 
 mt2.de_ch AS key_label,
 COUNT(meta_data.media_resource_id) AS count,
 meta_context_groups.position AS context_group_position,
 meta_contexts.position AS context_position,
 meta_key_definitions.position AS definition_position,
 meta_terms.id, meta_terms.de_ch as value
 FROM meta_contexts
 INNER JOIN meta_context_groups ON meta_context_groups.id = meta_contexts.meta_context_group_id
 INNER JOIN meta_key_definitions ON meta_key_definitions.meta_context_name = meta_contexts.name
 INNER JOIN meta_terms mt2 ON meta_key_definitions.label_id = mt2.id
 INNER JOIN meta_terms mt3 ON meta_contexts.label_id = mt3.id
 INNER JOIN meta_keys ON meta_key_definitions.meta_key_id = meta_keys.id
 INNER JOIN meta_data ON meta_data.meta_key_id = meta_keys.id
 INNER JOIN keywords ON keywords.meta_datum_id = meta_data.id
 INNER JOIN meta_terms ON keywords.meta_term_id = meta_terms.id
 WHERE meta_keys.meta_datum_object_type = 'MetaDatumKeywords'
 AND meta_data.media_resource_id IN (SELECT media_resources.id FROM "media_resources" WHERE "media_resources"."type" IN ('MediaEntry', 'MediaSet', 'FilterSet') AND ( media_resources.user_id = 10262
 OR
 media_resources.view = true
 OR
 EXISTS ( SELECT 'true' FROM "userpermissions" WHERE "userpermissions"."view" = 't' AND "userpermissions"."user_id" = 10262 AND (userpermissions.media_resource_id = media_resources.id) ) 
 OR
 EXISTS ( SELECT 'true' FROM "grouppermissions" INNER JOIN "groups" ON "groups"."id" = "grouppermissions"."group_id" INNER JOIN "groups_users" ON "groups_users"."group_id" = "groups"."id" INNER JOIN "users" ON "users"."id" = "groups_users"."user_id" WHERE "grouppermissions"."view" = 't' AND (grouppermissions.media_resource_id = media_resources.id) AND (users.id = 10262) ) 
) AND (media_resources.id IN (SELECT media_resources.id FROM "media_resources" INNER JOIN "meta_data" ON "meta_data"."media_resource_id" = "media_resources"."id" INNER JOIN "meta_keys" ON "meta_keys"."id" = "meta_data"."meta_key_id" INNER JOIN meta_data_meta_terms ON meta_data_meta_terms.meta_datum_id = meta_data.id WHERE "meta_keys"."id" = 'project type' AND "meta_keys"."meta_datum_object_type" = 'MetaDatumMetaTerms')))
 GROUP BY meta_terms.id, meta_contexts.name, mt3.de_ch, meta_keys.id, mt2.de_ch,
 meta_context_groups.position, meta_contexts.position, meta_key_definitions.position UNION SELECT meta_contexts.name AS context_name, 
 mt3.de_ch AS context_label,
 meta_keys.id AS key_name, 
 mt2.de_ch AS key_label,
 COUNT(meta_data.media_resource_id) AS count,
 meta_context_groups.position AS context_group_position,
 meta_contexts.position AS context_position,
 meta_key_definitions.position AS definition_position,
 groups.id, groups.name AS value
 FROM meta_contexts
 INNER JOIN meta_context_groups ON meta_context_groups.id = meta_contexts.meta_context_group_id
 INNER JOIN meta_key_definitions ON meta_key_definitions.meta_context_name = meta_contexts.name
 INNER JOIN meta_terms mt2 ON meta_key_definitions.label_id = mt2.id
 INNER JOIN meta_terms mt3 ON meta_contexts.label_id = mt3.id
 INNER JOIN meta_keys ON meta_key_definitions.meta_key_id = meta_keys.id
 INNER JOIN meta_data ON meta_data.meta_key_id = meta_keys.id
 INNER JOIN meta_data_meta_departments ON meta_data_meta_departments.meta_datum_id = meta_data.id
 INNER JOIN groups ON meta_data_meta_departments.meta_department_id = groups.id
 WHERE meta_keys.meta_datum_object_type = 'MetaDatumDepartments'
 AND meta_data.media_resource_id IN (SELECT media_resources.id FROM "media_resources" WHERE "media_resources"."type" IN ('MediaEntry', 'MediaSet', 'FilterSet') AND ( media_resources.user_id = 10262
 OR
 media_resources.view = true
 OR
 EXISTS ( SELECT 'true' FROM "userpermissions" WHERE "userpermissions"."view" = 't' AND "userpermissions"."user_id" = 10262 AND (userpermissions.media_resource_id = media_resources.id) ) 
 OR
 EXISTS ( SELECT 'true' FROM "grouppermissions" INNER JOIN "groups" ON "groups"."id" = "grouppermissions"."group_id" INNER JOIN "groups_users" ON "groups_users"."group_id" = "groups"."id" INNER JOIN "users" ON "users"."id" = "groups_users"."user_id" WHERE "grouppermissions"."view" = 't' AND (grouppermissions.media_resource_id = media_resources.id) AND (users.id = 10262) ) 
) AND (media_resources.id IN (SELECT media_resources.id FROM "media_resources" INNER JOIN "meta_data" ON "meta_data"."media_resource_id" = "media_resources"."id" INNER JOIN "meta_keys" ON "meta_keys"."id" = "meta_data"."meta_key_id" INNER JOIN meta_data_meta_terms ON meta_data_meta_terms.meta_datum_id = meta_data.id WHERE "meta_keys"."id" = 'project type' AND "meta_keys"."meta_datum_object_type" = 'MetaDatumMetaTerms')))
 GROUP BY groups.id, meta_contexts.name, mt3.de_ch, meta_keys.id, mt2.de_ch,
 meta_context_groups.position, meta_contexts.position, meta_key_definitions.position ) AS t1 ORDER BY context_group_position, context_position, definition_position;
