traits:
  asdf: true
scripts:
  firefox-asdf-install:
    exclusive_executor_resource: asdf-firefox
    body: |
      #!/usr/bin/env bash
      set -euxo pipefail
      if [[ ! -d ~/.asdf/plugins/firefox ]]; then
        asdf plugin add firefox https://github.com/DrTom/asdf-firefox.git
      else
        asdf plugin update firefox
      fi
      asdf install firefox
  test:
    start_when:
      firefox is installed:
        script_key: firefox-asdf-install
