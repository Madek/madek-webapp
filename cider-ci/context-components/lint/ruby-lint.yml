"Ruby Lint":

  include: cider-ci/context-components/ruby-setup.yml

  tasks:

    code-complexity-flog:
      name: "Ruby: Code complexity with flog"
      scripts:
        test:
          body: |
            set -eux
            export PATH=~/.rubies/$RUBY/bin:$PATH
            bundle exec cider-ci_flog -m app/ \
            -e app/controllers/oembed_controller.rb

    code-similarity:
      name: "Ruby: Code similarity with flay"
      scripts:
        test:
          body: |
            set -eux
            export PATH=~/.rubies/$RUBY/bin:$PATH
            bundle exec cider-ci_flay -m 78 app/
  # FIXME: set to 26 again after cleanup  â†‘  <https://www.pivotaltracker.com/story/show/119127755>

    lint-ruby:
      name: "Ruby: Lint/Stylecheck with Rubocop"
      scripts:
        test:
          body: |
            set -eux
            export PATH=~/.rubies/$RUBY/bin:$PATH
            bundle exec rubocop
