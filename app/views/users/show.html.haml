%section#content_body
  %div.page_title_left
    .icon_me
    =_("Meine Inhalte")
  .clear
  #results
    Loading...

%section#content_body2      
  %div.page_title_left
    .icon_me
    =_("Mir anvertraute Inhalte")
  .clear
  #results_others.not_public
    Loading...

%section#content_body2      
  %div.page_title_left
    .icon_me
    =_("Öffentliche Inhalte")
  .clear
  #results_others.public
    Loading...

= render :partial => "resources/templates"

:javascript
  // TODO dry => batch_actions.js
  $(document).ready(function () {
    function display_entries(entries, container){
      $(container).html($.tmpl("tmpl/media_resources/thumb_box", entries, {with_checkbox: false}));
    }

    var url_1 = "#{user_resources_path(current_user)}"; 
    $.ajax({
      url: url_1,
      dataType: 'json',
      complete: function(response){
        var data = JSON.parse(response.responseText);
        var container_str = "#results";
        if(data.entries.length){
          display_entries(data.entries, container_str);
          if(data.pagination.total_entries > #{PER_PAGE.first}){
            $(container_str).append("<div class='buttons'><a href=\""+url_1+"\">Alle meine Inhalt</a></div>");
          }
        }else{
          $(container_str).html("Sie haben keine Medien.");
        }
      }
    });

    var url_2 = "#{resources_path(not_by_current_user: true, public: false)}"; 
    $.ajax({
      url: url_2,
      dataType: 'json',
      complete: function(response){
        var data = JSON.parse(response.responseText);
        var container_str = "#results_others.not_public";  
        if(data.entries.length){
          display_entries(data.entries, container_str);
          if(data.pagination.total_entries > #{PER_PAGE.first}){
            $(container_str).append("<div class='buttons'><a href=\""+url_2+"\">Alle mir anvertraute Inhalt</a></div>");
          }
        }else{
          $(container_str).html("Es gibt keine weiteren Medieneinträge.");
        }
      }
    });

    var url_3 = "#{resources_path(not_by_current_user: true, public: true)}"; 
    $.ajax({
      url: url_3,
      dataType: 'json',
      complete: function(response){
        var data = JSON.parse(response.responseText);
        var container_str = "#results_others.public";  
        if(data.entries.length){
          display_entries(data.entries, container_str);
          if(data.pagination.total_entries > #{PER_PAGE.first}){
            $(container_str).append("<div class='buttons'><a href=\""+url_3+"\">Alle öffentliche Inhalte</a></div>");
          }
        }else{
          $(container_str).html("Es gibt keine weiteren Medieneinträge.");
        }
      }
    });

  });

