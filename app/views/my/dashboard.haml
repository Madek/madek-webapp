-# template for the main dashboard (#index-ish)
- content_for(:title_head) do
  = t(:dashboard_title_head)

- content_for(:page_header) do
  = component('page-header',
              icon: component('icon.home'),
              text: t(:sitemap_my_archive),
              actions: [component('button.primary',
                                  link: new_media_entry_path,
                                  text: t(:dashboard_create_media_entry_btn))])

-# - content_for(:page_sidebar) do
-#   = render partial: 'sidebar'
-#
- content_for(:page_content) do
  - dashboard_content = capture_haml do
    -# each section: build a title and render the partial
    - @sections.each do |section_id, section|
      -# empty section *are* skipped on the dashboard index
      - next if section[:is_empty?]
      = combo('resources-header', title: section[:title],
                link: { text: t(:dashboard_show_all),
                        href: my_dashboard_section_path(section[:id])})
      = render partial: "my/section_#{section[:partial]}",
               locals: { get: @get, section: section, show_pagination_nav: false }

  .ui-container.pal
    - if dashboard_content
      = dashboard_content
    - else
      = t(:dashboard_welcome_msg)
